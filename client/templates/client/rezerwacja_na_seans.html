{% extends 'client/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block head %}
    <link rel="stylesheet" href="{% static 'client/rezerwacjanaseans.css' %}">
    <script src="https://code.jquery.com/jquery-3.4.1.slim.js"
            integrity="sha256-BTlTdQO9/fascB1drekrDVkaKd9PkwBymMlHOiG+qLI="
            crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js"
            type="text/javascript"></script>
    <meta name="viewport" content="width=device-width">
{% endblock %}

{% block content %}
    {% if showtime.start_date > time_now %}
        {% if messages %}
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        {% endif %}

        <script type="text/javascript" src="{% static 'client/js/scripts.js' %}">
        </script>

        <div class="card"
             style="width: 40rem; padding: 20px; margin-left:400px;box-shadow:0 8px 6px -6px black; margin-bottom: 10px; background-color: #d8d8d8; opacity: 90%">
        <img src="{{ showtime.movie_id.thumbnail.url }}" class="card-img-top" width="200" height="285"/><br>
        <div class="card-body" style="margin-left:30px">
        <b class="card-title">tytuł:</b> {{ showtime.movie_id.title|title }}<br><br>
        <b>reżyser:</b> {{ showtime.movie_id.director }}<br>
        <b>data i godzina rozpoczęcia seansu:</b>
        {{ showtime.start_date| time:"H:i" }}
        {{ showtime.start_date| date:"d.m.Y" }} r.<br>
        <b>czas trwania:</b> {{ showtime.movie_id.duration }}<br><br>

        <form action="" method="post" id="ticket_no">

            {% csrf_token %}
            {{ client_form|crispy }}
            {{ reservation_form|crispy }}
            {{ ticket_form|crispy }}

            <div class="screen">
                <center><h1>Mapa miejsc</h1></center>
                <div class="exit exit--front">
                </div>
                <div class="input-group-prepend" style="margin-left:40px">
                    <ol class="front">
                        <li class="row row--A">
                            <ol class="seats" type="A">

                                {% for i in s_form.seats_row_a %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--B">
                            <ol class="seats" type="B">
                                {% for i in s_form.seats_row_b %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--C">
                            <ol class="seats" type="C">
                                {% for i in s_form.seats_row_c %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--D">
                            <ol class="seats" type="D">
                                {% for i in s_form.seats_row_d %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--E">
                            <ol class="seats" type="E">
                                {% for i in s_form.seats_row_e %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--F">
                            <ol class="seats" type="F">
                                {% for i in s_form.seats_row_f %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--G">
                            <ol class="seats" type="G">
                                {% for i in s_form.seats_row_g %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--H">
                            <ol class="seats" type="H">
                                {% for i in s_form.seats_row_h %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--I">
                            <ol class="seats" type="I">
                                {% for i in s_form.seats_row_i %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>

                        <li class="row row--J">
                            <ol class="seats" type="J">
                                {% for i in s_form.seats_row_j %}
                                    {% if i.data.selected %}
                                        <label for="{{ i.data.id }}"></label>
                                        <input type="checkbox" name="{{ i.data.name }}" value="{{ i.data.value }}"
                                               id="{{ i.data.id }}" checked disabled>
                                    {% else %}
                                        {{ i }}
                                    {% endif %}
                                {% endfor %}
                            </ol>
                        </li>
                    </ol>
                </div>
            </div>
            <button class="btn btn-info" style="margin-left:250px;margin-bottom: 15px" type="submit">Dalej</button>
        </form>
    {% else %}
        <h2>Nie można zarezerwować miejsc, seans już się odbył.</h2>
    {% endif %}
</div>
</div>
{% endblock %}